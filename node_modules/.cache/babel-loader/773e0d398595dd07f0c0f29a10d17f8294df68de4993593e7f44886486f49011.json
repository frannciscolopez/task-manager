{"ast":null,"code":"const JSON_FILENAME = 'tasks.json';\nconst TASKS = 'tasks';\nconst CURRENT_ID = 'currentId';\nconst [currentId, setCurrentId] = useState(0);\nexport const loadTasksFromJsonFile = () => {\n  try {\n    const jsonTasks = localStorage.getItem(JSON_FILENAME);\n    console.log(jsonTasks);\n    return jsonTasks ? JSON.parse(jsonTasks) : [];\n  } catch (error) {\n    console.error('Error loading tasks:', error);\n    return [];\n  }\n};\nconst saveTasksToJsonFile = tasks => {\n  try {\n    const jsonTasks = JSON.stringify(tasks);\n    localStorage.setItem(JSON_FILENAME, jsonTasks);\n  } catch (error) {\n    console.error('Error saving tasks:', error);\n  }\n};\nexport const addTaskToJson = task => {\n  const existingTasks = loadTasksFromJsonFile();\n  const taskId = currentId + 1;\n  const newTask = {\n    ...task,\n    id: taskId\n  };\n  const updatedTasks = [...existingTasks, newTask];\n  saveTasksToJsonFile(updatedTasks);\n};\n\n// Remove a task from JSON file by task ID\nexport const removeTaskFromJson = taskId => {\n  const existingTasks = loadTasksFromJsonFile();\n  const updatedTasks = existingTasks.filter(task => task.id !== taskId);\n  console.log(\"updatedTasks: \", updateTask);\n  saveTasksToJsonFile(updatedTasks);\n};\n\n// Update a task in JSON file by task ID\nexport const updateTaskFieldInJson = (taskId, fieldToUpdate, updatedValue) => {\n  const existingTasks = loadTasksFromJsonFile();\n  const updatedTasks = existingTasks.map(task => {\n    if (task.id === taskId) {\n      return {\n        ...task,\n        [fieldToUpdate]: updatedValue\n      };\n    }\n    return task;\n  });\n  saveTasksToJsonFile(updatedTasks);\n};\nexport function initializeTasksAndCurrentId(setTasks, setCurrentId) {\n  const storedTasks = JSON.parse(localStorage.getItem(TASKS)) || [];\n  const storedCurrentId = JSON.parse(localStorage.getItem(CURRENT_ID)) || 0;\n  setTasks(storedTasks);\n  setCurrentId(storedCurrentId);\n}\nexport function updateLocalStorage(key, value) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\nexport function addTask(newTask, currentId, tasks, setTasks, setCurrentId) {\n  newTask.id = currentId;\n  setCurrentId(currentId + 1);\n  const updatedTasks = [...tasks, newTask];\n  setTasks(updatedTasks);\n  updateLocalStorage(TASKS, updatedTasks);\n  updateLocalStorage(CURRENT_ID, currentId + 1);\n}\nexport function deleteTask(taskId, tasks, setTasks) {\n  const updatedTasks = tasks.filter(task => task.id !== parseInt(taskId));\n  setTasks(updatedTasks);\n  updateLocalStorage(TASKS, updatedTasks);\n}\nexport function updateTask(taskId, fieldToUpdate, newValue, tasks, setTasks) {\n  const taskIndex = tasks.findIndex(task => task.id === parseInt(taskId));\n  if (taskIndex === -1) {\n    console.error('Task not found with the provided ID.');\n    return;\n  }\n  const updatedTasks = [...tasks];\n  updatedTasks[taskIndex] = {\n    ...updatedTasks[taskIndex],\n    [fieldToUpdate]: newValue\n  };\n  setTasks(updatedTasks);\n  updateLocalStorage(TASKS, updatedTasks);\n}","map":{"version":3,"names":["JSON_FILENAME","TASKS","CURRENT_ID","currentId","setCurrentId","useState","loadTasksFromJsonFile","jsonTasks","localStorage","getItem","console","log","JSON","parse","error","saveTasksToJsonFile","tasks","stringify","setItem","addTaskToJson","task","existingTasks","taskId","newTask","id","updatedTasks","removeTaskFromJson","filter","updateTask","updateTaskFieldInJson","fieldToUpdate","updatedValue","map","initializeTasksAndCurrentId","setTasks","storedTasks","storedCurrentId","updateLocalStorage","key","value","addTask","deleteTask","parseInt","newValue","taskIndex","findIndex"],"sources":["/Users/franciscolopezmartinez/Desktop/task-manager-test/src/helper.js"],"sourcesContent":["const JSON_FILENAME = 'tasks.json';\n\nconst TASKS = 'tasks';\nconst CURRENT_ID = 'currentId';\n\nconst [currentId, setCurrentId] = useState(0);\n\nexport const loadTasksFromJsonFile = () => {\n  try {\n    const jsonTasks = localStorage.getItem(JSON_FILENAME);\n    console.log(jsonTasks);\n    return jsonTasks ? JSON.parse(jsonTasks) : [];\n  } catch (error) {\n    console.error('Error loading tasks:', error);\n    return [];\n  }\n};\n\nconst saveTasksToJsonFile = (tasks) => {\n  try {\n    const jsonTasks = JSON.stringify(tasks);\n    localStorage.setItem(JSON_FILENAME, jsonTasks);\n  } catch (error) {\n    console.error('Error saving tasks:', error);\n  }\n};\n\nexport const addTaskToJson = (task) => {\n  const existingTasks = loadTasksFromJsonFile();\n  const taskId = currentId + 1;\n\n  const newTask = {\n    ...task,\n    id: taskId,\n  };\n\n  const updatedTasks = [...existingTasks, newTask];\n\n  saveTasksToJsonFile(updatedTasks);\n};\n\n// Remove a task from JSON file by task ID\nexport const removeTaskFromJson = (taskId) => {\n  const existingTasks = loadTasksFromJsonFile();\n  const updatedTasks = existingTasks.filter((task) => task.id !== taskId);\n  console.log(\"updatedTasks: \" ,updateTask);\n  saveTasksToJsonFile(updatedTasks);\n};\n\n// Update a task in JSON file by task ID\nexport const updateTaskFieldInJson = (taskId, fieldToUpdate, updatedValue) => {\n  const existingTasks = loadTasksFromJsonFile();\n  const updatedTasks = existingTasks.map((task) => {\n    if (task.id === taskId) {\n      return {\n        ...task,\n        [fieldToUpdate]: updatedValue,\n      };\n    }\n    return task;\n  });\n  saveTasksToJsonFile(updatedTasks);\n};\n\nexport function initializeTasksAndCurrentId(setTasks, setCurrentId) {\n    const storedTasks = JSON.parse(localStorage.getItem(TASKS)) || [];\n    const storedCurrentId = JSON.parse(localStorage.getItem(CURRENT_ID)) || 0;\n    setTasks(storedTasks);\n    setCurrentId(storedCurrentId);\n  }\n  \n  export function updateLocalStorage(key, value) {\n    localStorage.setItem(key, JSON.stringify(value));\n  }\n  \n  export function addTask(\n    newTask,\n    currentId,\n    tasks,\n    setTasks,\n    setCurrentId\n  ) {\n    newTask.id = currentId;\n    setCurrentId(currentId + 1);\n  \n    const updatedTasks = [...tasks, newTask];\n    setTasks(updatedTasks);\n  \n    updateLocalStorage(TASKS, updatedTasks);\n    updateLocalStorage(CURRENT_ID, currentId + 1);\n  }\n  \n  export function deleteTask(taskId, tasks, setTasks) {\n    const updatedTasks = tasks.filter((task) => task.id !== parseInt(taskId));\n    setTasks(updatedTasks);\n    updateLocalStorage(TASKS, updatedTasks);\n  }\n  \n  export function updateTask(\n    taskId,\n    fieldToUpdate,\n    newValue,\n    tasks,\n    setTasks\n  ) {\n    const taskIndex = tasks.findIndex((task) => task.id === parseInt(taskId));\n  \n    if (taskIndex === -1) {\n      console.error('Task not found with the provided ID.');\n      return;\n    }\n  \n    const updatedTasks = [...tasks];\n    updatedTasks[taskIndex] = {\n      ...updatedTasks[taskIndex],\n      [fieldToUpdate]: newValue,\n    };\n  \n    setTasks(updatedTasks);\n    updateLocalStorage(TASKS, updatedTasks);\n  }\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}